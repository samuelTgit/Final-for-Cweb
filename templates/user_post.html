{% extends "base.html" %}

{% block title %}{{ legend }}{{ user.username }}'s Posts{% endblock %}

    {% block content %}
        <div>
            <div>
                <h1>Posts by {{ user.username }}</h1>
                <br>
                <br>
                <br>
                <br>
            </div>
            {% if posts %}
                {% for post in posts %}
                <div>
                    <h3>
                        <div>
                        <a href="{{ url_for('view_post', post_id=post.id) }}">
                            <button type="button" class="btn btn-light">{{ post.title }}</button>
                        </a>
                        </div>
                    </h3>
                    <p>
                        {{ post.created_at.strftime('%B %d, %Y at %I:%M %p') }}
                    </p>
                    <p>
                        {% if post.content|length > 200 %}
                            {{ post.content[:200] }}
                        {% else %}
                            {{ post.content }}
                        {% endif %}
                    </p>
                    <div>
                        <a href="{{ url_for('view_post', post_id=post.id) }}">
                            <button type="button" class="btn btn-success">Read</button>
                        </a>
                        <br>
                        <br>
                        {% if current_user.is_authenticated and current_user == user %}
                            <a href="{{ url_for('edit_post', post_id=post.id) }}">
                                <button type="button" class="btn btn-warning">Edit</button>
                            </a>
                        {% endif %}
                    </div>                
                </div>
                {% endfor %}
            {% else %}
                <div>
                    <p>{{ user.username }} no posts yet!</p>
                </div>
            {% endif %}

            <br>
            <br>
            <br>
            <div>
                <a href="{{ url_for('index') }}"><button type="button" class="btn btn-dark">Blog Page</button></a>
            </div>
        </div>
    {% endblock %}